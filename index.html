<!DOCTYPE html>
<!--

She's a beaut, isn't she?

-->
<html>
    <head>
        <title>EmmaPHP - User Guide</title>
        
        <meta name="viewport" content="width=device-width, user-scalable=yes">
                
		<link rel="icon" href="heart.ico">

        <!--css-->
        <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'>
        <link href="style.css" rel="stylesheet" type="text/css" />
        <!--css end-->
        
        <!--jquery-->
        <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
        <!--jquery end-->
        
        <!--script-->
        <script>
        
            function download() {
                
                window.location = "https://github.com/bobdesaunois/EmmaPHP/releases";
                
            }
            
            function userGuide() {
                
                $("html, body").animate(
                    {"scrollTop" : document.getElementById("section_2").offsetTop}, 
                    {duration: 250, queue: false}
                );
                
            }
            
            function moveTo(element) {
                
                $("html, body").animate(
                    {"scrollTop" : document.getElementById(element).offsetTop}, 
                    {duration: 250, queue: false}
                );
                
            }
        
        </script>
        <!--script end-->
        
    </head>
    <body>
        
	<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-52319357-1', 'auto');
        ga('send', 'pageview');

    </script>

        <!--wrapper-->
        <div id="wrapper">
            
            <!--section_1-->
            <div class="section" id="section_1">
                
                Version <b>1.0.0 Alpha</b>
                
                <!--section_1_content-->
                <div class="content" id="section_1_content">
                    
                    <!--title-->
                    <div class="center" id="title">EmmaPHP</div>
                    <!--title end-->
                    
                    <!--description-->
                    <div class="center" id="description">
                        The cutest PHP MVC Framework out there.
                    </div>
                    <!--description end-->
                    
                    <!--download-->
                    <div id="download">
                        
                        <button id="download_button" onclick="download();">Download</button><br/><br/>
                        
                        <a href="#user_guide" id="dwnlwd" onclick="userGuide();">or click here to take a look at our user guide!</a>
                        
                    </div>
                    <!--download end-->
                    
                </div>
                <!--section_1_content end-->
                
            </div>
            <!--section_1 end-->
            
            <!--section_2-->
            <div class="section" id="section_2">
                
                <div class="content" id="section_2_content">
                
                    <small>
                    
                    <h1 class="pink">User Guide Index</h1>
                    <ul>
                        
                        <li><a href="#configuration"><b>Configuration</b></a></li>
                            <ul>
                                <li>Files</li>
                            </ul>
                        <br/>
                        
                        <li><a href="#controllers"><b>Controllers</b></a></li>
                            <ul>
                                <li>Index</li>
                                <li>Controller creation</li>
                                <li>Naming</li>
                                <li>Base controller</li>
                            </ul><br/>
                            
                        <li><a href="#models"><b>Models</b></a></li>
                            <ul>
                                <li>Model creation</li>
                                <li>Naming</li>
                                <li>Base model</li>
                                <li>Loading models</li>
                                <li>Interacting with the Database</li>
                                    <ul>
                                        <li>Using PDO</li>
                                        <li>Using the database class</li>
                                    </ul><br/>
                                <li>Using your homemade model</li><br/>
                            </ul>
                        <li><a href="#views"><b>Views</b></a></li>
                        <ul>
                            <li>View creation</li>
                            <li>Linking CSS & JavaScript</li>
                            <li>Loading views</li>
                        </ul>
						<br/>
						<li><a href="#parameters"><b>Parameters</b></a></li>
						<li><a href="#redirecting"><b>Redirecting</b></a></li>
                    </ul>
                
                    <!--configuration-->
                    <div class="ug_item" id="configuration">
                        <h1 class="pink">Configuration</h1><br/>
                        <h2><b>Files</b></h2><br/>
                        There are a few files dedicated to holding configuration settings.<br/>
                        config/config.php is for setting the default controller, debug mode and the session.<br/>
                        while config/database.php is for setting all database variables.<br/>
                        Then there's ./web_config, it's in the root directory for a reason,<br/>
                        <b>so do not drag it into the config folder.</b><br/>
                        ./web_config.php is for defining any of your own constants and for setting<br/>
                        the title, basepath and such.
                    </div>
                    <!--configuration end-->
                    
                    <!--controllers-->
                    <div class="ug_item" id="controllers">
                        
                        <h1 class="pink">EmmaPHP::Controllers</h1><br/>
                        <h2><b>Controller creation</b></h2><br/>
                        Here's a short example of what a controller would look like<br/>
                        within the <span class="pink">EmmaPHP Framework</span>.<br/><br/>
<pre>
class Welcome_controller extends Emma_Controller {
    
    function __construct() {
        
        parent::__construct();
        
    }
    
    public function index() {
        
        $this->page();
        
    }
    
    public function page($page = "welcome") {
        
        if(!file_exists("views/pages/" . $page . ".php")) {
            
            $this->show_404();
            
        } else {
            
            $this->load->view("pages/" . $page . ".php");
            
        }
        
    }
    
}
</pre>
                        <br/>
                        
                        <h2><b>Index</b></h2><br/>
                        If a method was not supplied through the URL then the controller<br/>
                        will always -- if the method exists, run a public <span class="pink">index()</span>.<br/>
                        Use the <span class="pink">index()</span> method as the index of your controller.<br/>
                        <b>Note that the <span class="pink">index()</span> method is mandatory, you must have a <i>public</i> index in your controller.</b>
                        <br/>
                        <br/>
                        <h2><b>Naming</b></h2><br/>
                        Both naming of the file and the class of the controller<br/>
                        is very important, this controller is the <span class="pink">Welcome controller</span>.<br/>
                        The file would be named in lower-case <span class="pink">"welcome.php"</span>,<br/>
                        while the class is named <span class="pink">Welcome_controller</span>.<br/>
                        <br/>
                        It's very important that the class name starts with a capital<br/>
                        like you would do anywhere else.<br/>
                        And it's important that you add <span class="pink">"_controller"</span> as suffix.<br/>
                        Whether you write it as <span class="pink">"Welcome_<b>C</b>ontroller"</span> or <br/>
                        <span class="pink">"Welcome_<b>c</b>ontroller"</span> really doesn't matter.<br/>
<!--                        In contradiction to homemade controllers it <b>does matter</b> when you are extending.<br/>
                        you should never extend <span class="pink">"Emma_<b>c</b>ontroller"</span> but instead <b>always</b> extend <span class="pink">"Emma_<b>C</b>ontroller"</span>-->
                        <br/>
                        
                        <h2><b>Base controller</b></h2><br/>
                        Then there's adding your homemade controller<br/> as a child to the parent controller <span class="pink">Emma_Controller</span>.<br/>
                        Believe it or not but your homemade Controller <b>will actually run</b><br/>
                        if you do not extend it to <span class="pink">Emma_Controller</span>.<br/>
                        You will however not be able to benefit of any of the system base functions<br/>
                        that will render a view, load a model or return a 404 page.<br/>
                        Which ultimately defeats the purpose of using a Framework.<br/>
                        Therefore you should <b>always</b> make sure your homemade controller<br/>
                        does infact extends the <span class="pink">Emma_Controller</span>.<br/>
                        <br/>
                        Last but not least make sure that you run the parent's constructor<br/>
                        in your homemade controllers constructor before you do anything.<br/>
                        Like so:<br/><br/>
<pre>
function __construct() {
        
    parent::__construct();

}
</pre>
                        
                    </div>
                    <!--controllers end-->
                    
                    <!--models-->
                    <div id='models' class='ug_item'>
                        
                        <h1 class='pink'>EmmaPHP::Models</h1><br/>
                        
                        <h2>Model creation</h2><br/>
                        Consider a model called <span class="pink">Data_model</span>.<br/>
                        <br/>
<pre>
class Data_model extends Emma_Model {
    
    function __construct() {
        
        parent::__construct();
        
    }
    
    public function getData() {
        
        $sql =    "SELECT information_string "
                . "FROM DATA "
                . "LIMIT 1;";
        
        $stmt = $this->db->connection->prepare($sql);
        $stmt->execute();
        
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        $stmt->closeCursor();
        
        return $result;
        
    }

}
</pre><br/>
                        <br/>
                        <h2><b>Naming</b></h2><br/>
                        Much like we would create a controller you would create a model.<br/>
                        The file would be named <span class="pink">"data.php"</span>,<br/>
                        where as the class name would be <span class="pink">"Data_model"</span>.<br/>
                        <br/>
                        Again It's very important that the class name starts with a capital<br/>
                        like you would do anywhere else.<br/>
                        And it's important that you add <span class="pink">"_model"</span> as suffix.<br/>
                        Whether you write it as <span class="pink">"Data_<b>M</b>odel"</span> or<br/>
                        <span class="pink">"Data_<b>m</b>odel"</span> really doesn't matter.<br/>
                        <br/>
                        
                        <h2><b>Base model</b></h2><br/>
                        Then there's adding your homemade model<br/>
                        as a child to the parent model <span class="pink">Emma_Model</span>.<br/>
                        Believe it or not but your homemade model will actually run<br/>
                        if you do not extend it to <span class="pink">Emma_Model</span>.<br/>
                        However you will not be able to benefit off of the database<br/>
                        and it's child connection object.<br/>
                        Which ultimately defeats the purpose of using a Model or a Framework.<br/>
                        Therefore you should always make sure your homemade model<br/>
                        does infact extends the <span class="pink">Emma_Controller</span>.<br/>
                        <br/>
                        Last but not least make sure that you run the parent's constructor<br/>
                        in your homemade models constructor before you do anything.<br/>
                        Like so:<br/><br/>
<pre>
function __construct() {
        
    parent::__construct();

}
</pre><br/>
                        <br/>
                        
                        <h2><b>Loading models</b></h2><br/>
                        We may load models into our controllers by use of a function supplied by the loader: <span class="pink">$this->load</span>.<br/>
                        Assume we would have created a model called <span class="pink">"User_model"</span>,<br/>
                        this would be it's <b>class name</b> it's filename would be <span class="pink">"user.php"</span>.<br/>
                        I advice you to load all your models <b>after</b> the parent constructor.<br/>
                        We do this as following:<br/><br/>
<pre>
function __construct() {
        
    parent::__construct();

    $this->load->model("User_model");

}
</pre><br/>
                        You would notice that we load by model class name and not by filename.<br/>
                        <br/>
                        
                        <h2><b>Interacting with the Database</b></h2><br/>
                        
                        There are two ways of interacting with the Database<br/>
                        within the <span class="pink">EmmaPHP Framework</span>.<br/>
                        There's <b>using the database class</b> and <b>using PDO</b>.<br/>
                        The <span class="pink">EmmaPHP Framework</span> does <b>NOT</b> use MySQL or MySQLi extensions.<br/>
                        That is for a good reason and you shouldn't be using them either.<br/>
                        <br/>
                        <h3><b>Using PDO</b></h3><br/>
                        You can apply PDO within your model just like you would<br/>
                        anywhere else.<br/>
                        The only thing that would change is preparing statements.<br/>
                        You are to retrieve the <span class="pink">db</span> object and it's child <span class="pink">connection</span> object before you do so.<br/>
                        Consider the following code:<br/><br/>
<pre>
$sql =    "SELECT information_string "
        . "FROM DATA "
        . "LIMIT 1;";

$stmt = $this->db->connection->prepare($sql);
$stmt->execute();

$result = $stmt->fetch(PDO::FETCH_ASSOC);
$stmt->closeCursor();

return $result;
</pre><br/>
                        <br/>
                        Like stated before; nothing changes except preparing a statement.<br/>
                        You are to retrieve the <span class="pink">db</span> object from the local scope to then retrieve<br/>
                        it's child object <span class="pink">connection</span> to then use the <span class="pink">prepare()</span> method.<br/>
                        
                        
                        <br/>
                        <h3><b>Using the database class (UNIMPLEMENTED)</b></h3><br/>
                        This is yet to be implemented.<br/><br/>
                        
                        <h2><b>Using your homemade model</b></h2><br/>
                        So you've loaded in your model, now how do we use it?<br/>
                        Consider the following two files.<br/>
                        <br/>
                        <b>Welcome_controller</b>
<pre>
class Welcome_controller extends Emma_Controller {
    
    function __construct() {
        
        parent::__construct();

        $this->load->model("Data_model");
        
    }
    
    public function index() {
        
        echo $this->User_model->getData();
        
    }
    
}
</pre><br/>
<br/>
                        <b>Data_model</b>
<pre>
class Data_model extends Emma_Model {
    
    function __construct() {
        
        parent::__construct();
        
    }
    
    public function getData() {
        
        $sql =    "SELECT information_string "
                . "FROM DATA "
                . "LIMIT 1;";
        
        $stmt = $this->db->connection->prepare($sql);
        $stmt->execute();
        
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        $stmt->closeCursor();
        
        return $result;
        
    }

}
</pre><br/>
<br/>
                        After examinating the code you will notice that<br/>
                        a loaded model will be dynamically created into an object in the local scope.<br/>
                        You may access your homemade model instance through <span class="pink">$this->Data_model</span>, or whatever you named it.<br/>
                        <b>Note that your homemade models have public access modifiers,<br/>
                            so /do not/ forget to make sensetive data private.</b>
                        
                    </div>
                    <!--models end-->
                        
                    <!--views-->
                    <div id="views" class="ug_item">
                    
                        <h1 class="pink"><b>EmmaPHP::Views</b></h1>
                        <br/>
                        <h2><b>View creation</b></h2><br/>
                        Not a lot can be said about views,<br/>
                        they are your average HTML pages that the user sees.<br/>
                        they play a vital role in the MVC Architecture,<br/>
                        But nothing really changes about them.<br/>
                        Other than that you shouldn't forget to <br/>
                        echo the <span class="pink">TITLE</span> constant into the header like so:<br/>
                        <br/>
                        <pre>
&lt;head&gt;
    &lt;title&gt;&lt;?php echo TITLE; ?&gt;&lt;/title&gt;
&lt;/head&gt;
                        </pre>
                        <br/>
                        <h2><b>Linking CSS & JavaScript</b></h2><br/>
                        Everything is ran from the <span class="pink">index.php</span><br/>
                        so linking your <span class="pink">CSS</span> files is done easily as following:<br/>
                        <br/>
                        <pre>
&lt;link href=&quot;assets/css/yourcssfile.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
                        </pre>
                        <br/>
                        The same applies for <span class="pink">JavaScript</span> files.<br/>
                        <br/>
                        <pre>
&lt;script src=&quot;assets/scripts/yourjavascriptfile.js&quot;&gt;&lt;/script&gt;
                        </pre>
                        <br/><br/>
                        <h2><b>Loading views</b></h2><br/>
                        Loading views happens in the controller.<br/>
                        All views should be placed in the views directory<br/>
                        and from there on into the appropriate directory.<br/>
                        Feel free to create more subdirectories if you please to do so.<br/>
                        Consider the following code to load a view within a controller:<br/>
                        <br/>
                        <pre>
public function page($page = "welcome") {
        
    if(!file_exists("views/pages/" . $page . ".php")) {

        $this->show_404();

    } else {

        $this->load->view("pages/" . $page . ".php");

    }

}</pre>
                        <br/>
                        After close examination of the above displayed code<br/>
                        you would notice that <span class="pink">$this->load->view();</span> is the method that<br/>
                        supplies us with a way to return a view to the user through our controllers.<br/>
                        <br/>
                        It's good practice to first <b>check if the file exists before you return the view</b>.<br/>
                        This way you will be sure that the user isn't left with just<br/>
                        a blank screen or a confusing error should <span class="pink">debug mode</span> be on.
                        <br/>
                        You can easily see how we achieve this with use of the native <span class="pink">file_exists()</span> function<br/>
                        and the <span class="pink">$this->show_404()</span> method supplied by our base controller.<br/>
                        Also note how when making use of the <span class="pink">$this->load->view()</span> function we supply a <span class="pink">.php</span><br/>
                        extension where as loading models doesn't require us to supply a file extension.<br/>
                        This is done that way so that you may easily load both <span class="pink">PHP</span> and <span class="pink">HTML</span> files.
                        
                    </div>
                    <!--views end-->

					
					<!--parameters-->
					<div id="parameters" class="ug_item">
					
					<h1 class="pink"><b>EmmaPHP::Parameters</b></h1>
					<br/>
                    <h2><b>Parameters</b></h2>
                    <br/>
					Getting $_POST and $_GET variables goes via methods built into the base controller in <span class="pink">EmmaPHP</span>.<br/>
					They are always available and do not need to be loaded.
                    <br/><br/>
                    <pre>
public function index () {

    if ($this->getPost ("login_submit")) {

        $this->login ($this->getPost ("username"), $this->getPost ("password"));

    }

    if ($username = $this->getGet ("username")) {

        $this->profile ($username);

    }

}
                    </pre>

					</div>
					<!--end parameters-->
                    
					<!--redirecting-->
					<div id="redirecting" class="ug_item">
						
						<h1 class="pink"><b>EmmaPHP::Redirecting</b></h1><br/>
						<h2><b>Redirecting</b></h2>
						<br/>
						For redirecting there again is a built in function in <span class="pink">EmmaPHP</span>.<br/>
						Redirecting is always done from out the base url.<br/>
						<br/>
						This would redirect to the <span class="pink">WelcomeControllers</span>'s method <span class="pink">page ()</span>.<br/>
						<br/>
						<pre>
$this->redirect ("?c=welcome&m=page");
						</pre>
						

					</div>
					<!--end redirecting-->

                    </small>
                    
                    <!--this is so scrub of me but...-->
                    <br/><br/><br/><br/><br/><br/>
                    <!--no really this makes designers cry blood-->
                    
                </div>
                <!--section_2_content end-->
                
            </div>
            <!--section_2 end-->
            
        </div>
        <!--wrapper end-->
        
    </body>
</html>
